ARM GAS  /tmp/ccwT4ktZ.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"common.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text._com_int_pow,"ax",%progbits
  16              		.align	1
  17              		.syntax unified
  18              		.thumb
  19              		.thumb_func
  20              		.fpu softvfp
  22              	_com_int_pow:
  23              	.LFB64:
  24              		.file 1 "Src/common.c"
   1:Src/common.c  **** /*
   2:Src/common.c  ****  * common.c
   3:Src/common.c  ****  *
   4:Src/common.c  ****  *  Created on: Nov 14, 2018
   5:Src/common.c  ****  *      Author: bitohw03
   6:Src/common.c  ****  */
   7:Src/common.c  **** 
   8:Src/common.c  **** #include <stdarg.h>  //for va_list ap
   9:Src/common.c  **** #include <stdio.h>   //for printf
  10:Src/common.c  **** #include <string.h>  //for strlen
  11:Src/common.c  **** #include <stdlib.h>  //for atoi
  12:Src/common.c  **** #include <math.h>
  13:Src/common.c  **** #include "common.h"
  14:Src/common.c  **** 
  15:Src/common.c  **** static uint16_t _com_int_pow(uint8_t m, uint8_t n)
  16:Src/common.c  **** {
  25              		.loc 1 16 0
  26              		.cfi_startproc
  27              		@ args = 0, pretend = 0, frame = 0
  28              		@ frame_needed = 0, uses_anonymous_args = 0
  29              		@ link register save eliminated.
  30              	.LVL0:
  17:Src/common.c  **** 	uint8_t i = 0;
  18:Src/common.c  **** 	uint16_t result = 1;
  31              		.loc 1 18 0
  32 0000 0122     		movs	r2, #1
  19:Src/common.c  **** 
  20:Src/common.c  **** 	for ( i = 0; i < n; i++)
  33              		.loc 1 20 0
  34 0002 0023     		movs	r3, #0
  35 0004 04E0     		b	.L2
  36              	.LVL1:
  37              	.L3:
  21:Src/common.c  **** 	{
ARM GAS  /tmp/ccwT4ktZ.s 			page 2


  22:Src/common.c  **** 		result *= m;
  38              		.loc 1 22 0 discriminator 3
  39 0006 00FB02F2 		mul	r2, r0, r2
  40              	.LVL2:
  41 000a 92B2     		uxth	r2, r2
  42              	.LVL3:
  20:Src/common.c  **** 	{
  43              		.loc 1 20 0 discriminator 3
  44 000c 0133     		adds	r3, r3, #1
  45              	.LVL4:
  46 000e DBB2     		uxtb	r3, r3
  47              	.LVL5:
  48              	.L2:
  20:Src/common.c  **** 	{
  49              		.loc 1 20 0 is_stmt 0 discriminator 1
  50 0010 8B42     		cmp	r3, r1
  51 0012 F8D3     		bcc	.L3
  23:Src/common.c  **** 	}
  24:Src/common.c  **** 	return result;
  25:Src/common.c  **** }
  52              		.loc 1 25 0 is_stmt 1
  53 0014 1046     		mov	r0, r2
  54              	.LVL6:
  55 0016 7047     		bx	lr
  56              		.cfi_endproc
  57              	.LFE64:
  59              		.section	.text.com_str_to_int16,"ax",%progbits
  60              		.align	1
  61              		.global	com_str_to_int16
  62              		.syntax unified
  63              		.thumb
  64              		.thumb_func
  65              		.fpu softvfp
  67              	com_str_to_int16:
  68              	.LFB65:
  26:Src/common.c  **** 
  27:Src/common.c  **** int16_t com_str_to_int16(char *str)
  28:Src/common.c  **** {
  69              		.loc 1 28 0
  70              		.cfi_startproc
  71              		@ args = 0, pretend = 0, frame = 8
  72              		@ frame_needed = 0, uses_anonymous_args = 0
  73              	.LVL7:
  74 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  75              	.LCFI0:
  76              		.cfi_def_cfa_offset 32
  77              		.cfi_offset 4, -32
  78              		.cfi_offset 5, -28
  79              		.cfi_offset 6, -24
  80              		.cfi_offset 7, -20
  81              		.cfi_offset 8, -16
  82              		.cfi_offset 9, -12
  83              		.cfi_offset 10, -8
  84              		.cfi_offset 14, -4
  85 0004 82B0     		sub	sp, sp, #8
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 40
ARM GAS  /tmp/ccwT4ktZ.s 			page 3


  88 0006 0746     		mov	r7, r0
  89              	.LVL8:
  29:Src/common.c  **** 	char *ptr = str,tmp[5];
  30:Src/common.c  **** 	uint8_t  i = 0, len = 0;
  31:Src/common.c  **** 	int16_t  temp = 0;
  32:Src/common.c  **** 	bool IsHex = false;
  33:Src/common.c  **** 
  34:Src/common.c  **** 	memset(tmp,'\0',5);
  90              		.loc 1 34 0
  91 0008 0023     		movs	r3, #0
  92 000a 0093     		str	r3, [sp]
  93 000c 8DF80430 		strb	r3, [sp, #4]
  35:Src/common.c  **** 
  36:Src/common.c  **** 	if ((strchr(str,'x') != NULL) || (strchr(str,'X') != NULL))
  94              		.loc 1 36 0
  95 0010 7821     		movs	r1, #120
  96 0012 FFF7FEFF 		bl	strchr
  97              	.LVL9:
  98 0016 10B1     		cbz	r0, .L18
  99              	.L5:
 100              	.LVL10:
  37:Src/common.c  **** 	{
  38:Src/common.c  **** 		IsHex = true;
  39:Src/common.c  **** 		ptr += 2;
 101              		.loc 1 39 0
 102 0018 0237     		adds	r7, r7, #2
 103              	.LVL11:
  40:Src/common.c  **** 		for (i = 0; i < 4 ; i++)
 104              		.loc 1 40 0
 105 001a 0023     		movs	r3, #0
 106 001c 0FE0     		b	.L7
 107              	.LVL12:
 108              	.L18:
  36:Src/common.c  **** 	{
 109              		.loc 1 36 0 discriminator 1
 110 001e 5821     		movs	r1, #88
 111 0020 3846     		mov	r0, r7
 112 0022 FFF7FEFF 		bl	strchr
 113              	.LVL13:
 114 0026 0028     		cmp	r0, #0
 115 0028 F6D1     		bne	.L5
  32:Src/common.c  **** 
 116              		.loc 1 32 0
 117 002a 0023     		movs	r3, #0
 118 002c 0BE0     		b	.L6
 119              	.LVL14:
 120              	.L8:
  41:Src/common.c  **** 		{
  42:Src/common.c  **** 			tmp[i] = *ptr;
 121              		.loc 1 42 0 discriminator 3
 122 002e 17F8011B 		ldrb	r1, [r7], #1	@ zero_extendqisi2
 123              	.LVL15:
 124 0032 02AA     		add	r2, sp, #8
 125 0034 1A44     		add	r2, r2, r3
 126 0036 02F8081C 		strb	r1, [r2, #-8]
 127              	.LVL16:
  40:Src/common.c  **** 		{
ARM GAS  /tmp/ccwT4ktZ.s 			page 4


 128              		.loc 1 40 0 discriminator 3
 129 003a 0133     		adds	r3, r3, #1
 130              	.LVL17:
 131 003c DBB2     		uxtb	r3, r3
 132              	.LVL18:
 133              	.L7:
  40:Src/common.c  **** 		{
 134              		.loc 1 40 0 is_stmt 0 discriminator 1
 135 003e 032B     		cmp	r3, #3
 136 0040 F5D9     		bls	.L8
  38:Src/common.c  **** 		ptr += 2;
 137              		.loc 1 38 0 is_stmt 1
 138 0042 0123     		movs	r3, #1
 139              	.LVL19:
  43:Src/common.c  **** 			ptr++;
  44:Src/common.c  **** 		}
  45:Src/common.c  **** 		ptr = tmp;
 140              		.loc 1 45 0
 141 0044 6F46     		mov	r7, sp
 142              	.LVL20:
 143              	.L6:
  46:Src/common.c  **** 	}
  47:Src/common.c  **** 	else
  48:Src/common.c  **** 	{
  49:Src/common.c  **** 		ptr = str;
  50:Src/common.c  **** 	}
  51:Src/common.c  **** 
  52:Src/common.c  **** 	if (IsHex)
 144              		.loc 1 52 0
 145 0046 002B     		cmp	r3, #0
 146 0048 49D0     		beq	.L9
  53:Src/common.c  **** 	{
  54:Src/common.c  **** 		len = strlen(ptr);
 147              		.loc 1 54 0
 148 004a 3846     		mov	r0, r7
 149 004c FFF7FEFF 		bl	strlen
 150              	.LVL21:
 151 0050 5FFA80F8 		uxtb	r8, r0
 152              	.LVL22:
  31:Src/common.c  **** 	bool IsHex = false;
 153              		.loc 1 31 0
 154 0054 4FF0000A 		mov	r10, #0
  55:Src/common.c  **** 		for (i = 0; i < len; i++)
 155              		.loc 1 55 0
 156 0058 5646     		mov	r6, r10
 157 005a 15E0     		b	.L10
 158              	.LVL23:
 159              	.L11:
  56:Src/common.c  **** 		{
  57:Src/common.c  **** 			if (*ptr >= '0' && *ptr <= '9')
  58:Src/common.c  **** 			{
  59:Src/common.c  **** 				temp += (*ptr-'0') * _com_int_pow(16,len-1-i);
  60:Src/common.c  **** 			}
  61:Src/common.c  **** 			else if (*ptr >= 'a' && *ptr <= 'f')
 160              		.loc 1 61 0
 161 005c A0F16103 		sub	r3, r0, #97
 162 0060 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccwT4ktZ.s 			page 5


 163 0062 052B     		cmp	r3, #5
 164 0064 27D8     		bhi	.L13
  62:Src/common.c  **** 			{
  63:Src/common.c  **** 				temp += (*ptr-'a'+ 10) * _com_int_pow(16,len-1-i);
 165              		.loc 1 63 0
 166 0066 A0F15705 		sub	r5, r0, #87
 167 006a A8EB0601 		sub	r1, r8, r6
 168 006e C9B2     		uxtb	r1, r1
 169 0070 0139     		subs	r1, r1, #1
 170 0072 C9B2     		uxtb	r1, r1
 171 0074 1020     		movs	r0, #16
 172 0076 FFF7FEFF 		bl	_com_int_pow
 173              	.LVL24:
 174 007a 00FB05AA 		mla	r10, r0, r5, r10
 175              	.LVL25:
 176 007e 0FFA8AFA 		sxth	r10, r10
 177              	.LVL26:
 178              	.L12:
  64:Src/common.c  **** 			}
  65:Src/common.c  **** 			else if (*ptr >= 'A' && *ptr <= 'F')
  66:Src/common.c  **** 			{
  67:Src/common.c  **** 				temp += (*ptr-'A' + 10) * _com_int_pow(16,len-1-i);
  68:Src/common.c  **** 			}
  69:Src/common.c  **** 			ptr++;
 179              		.loc 1 69 0 discriminator 2
 180 0082 0137     		adds	r7, r7, #1
 181              	.LVL27:
  55:Src/common.c  **** 		{
 182              		.loc 1 55 0 discriminator 2
 183 0084 0136     		adds	r6, r6, #1
 184              	.LVL28:
 185 0086 F6B2     		uxtb	r6, r6
 186              	.LVL29:
 187              	.L10:
  55:Src/common.c  **** 		{
 188              		.loc 1 55 0 is_stmt 0 discriminator 1
 189 0088 4645     		cmp	r6, r8
 190 008a 2DD2     		bcs	.L15
  57:Src/common.c  **** 			{
 191              		.loc 1 57 0 is_stmt 1
 192 008c 3878     		ldrb	r0, [r7]	@ zero_extendqisi2
 193 008e A0F13003 		sub	r3, r0, #48
 194 0092 DBB2     		uxtb	r3, r3
 195 0094 092B     		cmp	r3, #9
 196 0096 E1D8     		bhi	.L11
  59:Src/common.c  **** 			}
 197              		.loc 1 59 0
 198 0098 A0F13004 		sub	r4, r0, #48
 199 009c A8EB0601 		sub	r1, r8, r6
 200 00a0 C9B2     		uxtb	r1, r1
 201 00a2 0139     		subs	r1, r1, #1
 202 00a4 C9B2     		uxtb	r1, r1
 203 00a6 1020     		movs	r0, #16
 204 00a8 FFF7FEFF 		bl	_com_int_pow
 205              	.LVL30:
 206 00ac 00FB04AA 		mla	r10, r0, r4, r10
 207              	.LVL31:
ARM GAS  /tmp/ccwT4ktZ.s 			page 6


 208 00b0 0FFA8AFA 		sxth	r10, r10
 209              	.LVL32:
 210 00b4 E5E7     		b	.L12
 211              	.L13:
  65:Src/common.c  **** 			{
 212              		.loc 1 65 0
 213 00b6 A0F14103 		sub	r3, r0, #65
 214 00ba DBB2     		uxtb	r3, r3
 215 00bc 052B     		cmp	r3, #5
 216 00be E0D8     		bhi	.L12
  67:Src/common.c  **** 			}
 217              		.loc 1 67 0
 218 00c0 A0F13709 		sub	r9, r0, #55
 219 00c4 A8EB0601 		sub	r1, r8, r6
 220 00c8 C9B2     		uxtb	r1, r1
 221 00ca 0139     		subs	r1, r1, #1
 222 00cc C9B2     		uxtb	r1, r1
 223 00ce 1020     		movs	r0, #16
 224 00d0 FFF7FEFF 		bl	_com_int_pow
 225              	.LVL33:
 226 00d4 00FB09AA 		mla	r10, r0, r9, r10
 227              	.LVL34:
 228 00d8 0FFA8AFA 		sxth	r10, r10
 229              	.LVL35:
 230 00dc D1E7     		b	.L12
 231              	.LVL36:
 232              	.L9:
  70:Src/common.c  **** 		}
  71:Src/common.c  **** 	}
  72:Src/common.c  **** 	else
  73:Src/common.c  **** 	{
  74:Src/common.c  **** 		temp = (int16_t)atoi(ptr);
 233              		.loc 1 74 0
 234 00de 3846     		mov	r0, r7
 235 00e0 FFF7FEFF 		bl	atoi
 236              	.LVL37:
 237 00e4 0FFA80FA 		sxth	r10, r0
 238              	.LVL38:
 239              	.L15:
  75:Src/common.c  **** 	}
  76:Src/common.c  **** 
  77:Src/common.c  **** 	return temp;
  78:Src/common.c  **** }
 240              		.loc 1 78 0
 241 00e8 5046     		mov	r0, r10
 242 00ea 02B0     		add	sp, sp, #8
 243              	.LCFI2:
 244              		.cfi_def_cfa_offset 32
 245              		@ sp needed
 246 00ec BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 247              		.cfi_endproc
 248              	.LFE65:
 250              		.text
 251              	.Letext0:
 252              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 253              		.file 3 "/usr/include/newlib/sys/lock.h"
 254              		.file 4 "/usr/include/newlib/sys/_types.h"
ARM GAS  /tmp/ccwT4ktZ.s 			page 7


 255              		.file 5 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 256              		.file 6 "/usr/include/newlib/sys/reent.h"
 257              		.file 7 "/usr/include/newlib/sys/_stdint.h"
 258              		.file 8 "/usr/include/newlib/stdlib.h"
 259              		.file 9 "/usr/include/newlib/math.h"
 260              		.file 10 "Drivers/CMSIS/Include/core_cm3.h"
 261              		.file 11 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 262              		.file 12 "Inc/common.h"
 263              		.file 13 "/usr/include/newlib/string.h"
ARM GAS  /tmp/ccwT4ktZ.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 common.c
     /tmp/ccwT4ktZ.s:16     .text._com_int_pow:0000000000000000 $t
     /tmp/ccwT4ktZ.s:22     .text._com_int_pow:0000000000000000 _com_int_pow
     /tmp/ccwT4ktZ.s:60     .text.com_str_to_int16:0000000000000000 $t
     /tmp/ccwT4ktZ.s:67     .text.com_str_to_int16:0000000000000000 com_str_to_int16
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
strchr
strlen
atoi
